/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","emotion","jquery","@grafana/data","@grafana/runtime","lodash"],(function(e,t,n,r,o,a,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=54)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(11),o=n(31),a=n(32),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},function(e,t,n){var r=n(12),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=r},function(e,t,n){var r=n(21),o=n(13),a=n(38),i=n(39),l=Object.prototype,c=l.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&a(t[0],t[1],u)&&(r=1);++n<r;)for(var s=t[n],f=i(s),p=-1,h=f.length;++p<h;){var d=f[p],v=e[d];(void 0===v||o(v,l[d])&&!c.call(e,d))&&(e[d]=s[d])}return e}));e.exports=u},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(4),o=n(3);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(5).Symbol;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(30))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(10),o=n(15);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t,n){var r=n(9),o=n(22),a=n(24);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(23),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,l=o(a.length-t,0),c=Array(l);++i<l;)c[i]=a[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=a[i];return u[t]=n(c),r(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(25),o=n(37)(r);e.exports=o},function(e,t,n){var r=n(26),o=n(27),a=n(9),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(28),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(29),o=n(36);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(10),o=n(33),a=n(3),i=n(35),l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,s=c.toString,f=u.hasOwnProperty,p=RegExp("^"+s.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?p:l).test(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(11),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[l]=n:delete e[l]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(34),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(5)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(13),o=n(14),a=n(16),i=n(3);e.exports=function(e,t,n){if(!i(n))return!1;var l=typeof t;return!!("number"==l?o(n)&&a(t,n.length):"string"==l&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(40),o=n(51),a=n(14);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(41),o=n(42),a=n(44),i=n(45),l=n(16),c=n(47),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),p=!n&&!s&&!f&&c(e),h=n||s||f||p,d=h?r(e.length,String):[],v=d.length;for(var b in e)!t&&!u.call(e,b)||h&&("length"==b||f&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||l(b,v))||d.push(b);return d}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(43),o=n(6),a=Object.prototype,i=a.hasOwnProperty,l=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!l.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(4),o=n(6);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(5),o=n(46),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,l=i&&i.exports===a?r.Buffer:void 0,c=(l?l.isBuffer:void 0)||o;e.exports=c}).call(this,n(17)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(48),o=n(49),a=n(50),i=a&&a.isTypedArray,l=i?o(i):r;e.exports=l},function(e,t,n){var r=n(4),o=n(15),a=n(6),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(12),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=l}).call(this,n(17)(e))},function(e,t,n){var r=n(3),o=n(52),a=n(53),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var l in e)("constructor"!=l||!t&&i.call(e,l))&&n.push(l);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){"use strict";n.r(t);var r=n(18),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var c,u,s,f,p=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t}(n(19).DataSourceWithBackend),h=n(20),d=n.n(h),v=n(7),b=n(0),m=n.n(b),y=n(1),g={compression:"NONE",format:"CSV",query:"SELECT * FROM S3Object",csv_allow_quoted_record_delimiter:!1,csv_comments:"#",csv_field_delimiter:",",csv_file_header_info:"USE",csv_quote_character:'"',csv_quote_escape_character:'"',csv_record_delimiter:"\n",json_type:"DOCUMENT",json_time_field_enable:!1,json_time_field:"",json_time_month_first:!1,json_time_bucket:1e6},_=[{label:"NONE",value:"NONE"},{label:"GZIP",value:"GZIP"},{label:"BZIP2",value:"BZIP2"}],j=[{label:"CSV",value:"CSV"},{label:"JSON",value:"JSON"},{label:"PARQUET",value:"PARQUET"}],E=[{label:"DOCUMENT",value:"DOCUMENT"},{label:"LINES",value:"LINES"}],x=[{label:"NONE",value:"NONE",description:"First line is not a header."},{label:"IGNORE",value:"IGNORE",description:"First line is a header, but you cant use the header values to indicate the column in an expression. You can use column position (such as _1, _2, …) to indicate the column (SELECT s._1 FROM OBJECT s)."},{label:"USE",value:"USE",description:'First line is a header, and you can use the header value to identify a column in an expression (SELECT "name" FROM OBJECT).'}],O=[{label:"Europe (Frankfurt)",value:"eu-central-1"},{label:"Europe (Ireland)",value:"eu-west-1"},{label:"Europe (London)",value:"eu-west-2"},{label:"Europe (Paris)",value:"eu-west-3"},{label:"Europe (Stockholm)",value:"eu-north-1"},{label:"US East (N. Virginia)",value:"us-east-1"},{label:"US East (Ohio)",value:"us-east-2"},{label:"US West (N. California)",value:"us-west-1"},{label:"US West (Oregon)",value:"us-west-2"},{label:"Asia Pacific (Mumbai)",value:"ap-south-1"},{label:"Asia Pacific (Seoul)",value:"ap-northeast-2"},{label:"Asia Pacific (Singapore)",value:"ap-southeast-1"},{label:"Asia Pacific (Sydney)",value:"ap-southeast-2"},{label:"Asia Pacific (Tokyo)",value:"ap-northeast-1"},{label:"Canada (Central)",value:"ca-central-1"},{label:"South America (São Paulo)",value:"sa-east-1"}],w=y.LegacyForms.FormField,S=y.LegacyForms.Select,C=function(e){function t(t){var n=e.call(this,t)||this;n.onRegionChange=function(e){var t=n.props,r=t.onOptionsChange,o=t.options,a=i({},o.jsonData);a.region=e.value,r(i(i({},o),{jsonData:a})),n.setState({region:e,endpoint:"",certificates:[]}),n.reload(e)},n.reload=function(e){var t=n.props.options;v.get("/api/datasources/"+t.id+"/resources/endpoint?region="+e.value).then((function(e){n.setState({endpoint:e})})).catch((function(e){console.log(e)})),v.get("/api/datasources/"+t.id+"/resources/certificates?region="+e.value).then((function(e){n.setState({certificates:JSON.parse(e)})})).catch((function(e){console.log(e)}))};var r=d.a.find(O,{value:t.options.jsonData.region})||O[0];return n.state={region:r,endpoint:"",certificates:[]},n.reload(r),n}return a(t,e),t.prototype.render=function(){var e=this.state,t=e.region,n=e.endpoint,r=e.certificates;return[m.a.createElement("div",{className:"gf-form-group",key:"region"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(w,{label:"Region",labelWidth:10,required:!0,inputEl:m.a.createElement(S,{width:27,options:O,value:t,onChange:this.onRegionChange})}))),m.a.createElement("div",{className:"gf-form-group",key:"configuration"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(w,{label:"MQTT Host",labelWidth:10,inputWidth:27,value:n,placeholder:"MQTT Host",readOnly:!0})),m.a.createElement("div",{className:"gf-form"},m.a.createElement(w,{label:"MQTT Port",labelWidth:10,inputWidth:27,value:"8883",readOnly:!0}))),m.a.createElement("div",{className:"gf-form-group",key:"certificates"},r.map((function(e){return m.a.createElement("p",{key:e.id},JSON.stringify(e))})))]},t}(b.PureComponent),N=n(8),P=n.n(N),F=n(2),A=y.LegacyForms.FormField,T=y.LegacyForms.Select,W=y.LegacyForms.Switch,I=function(e){function t(t){var n=e.call(this,t)||this;n.dirty=!1,n.onBlur=function(){var e=n.props.onRunQuery;n.dirty&&(n.dirty=!1,e())},n.onKeyDown=function(e){var t=n.props.onRunQuery;13===e.keyCode&&(n.dirty=!1,t())},n.onInputChange=function(e,t){return function(r){var o=n.props,a=o.onChange,l=o.query,c=o.onRunQuery,u=i({},l);u[e]=r.target.value,a(u),t?(n.dirty=!1,c()):n.dirty=!0}},n.onIntInputChange=function(e,t){return function(r){var o=n.props,a=o.onChange,l=o.query,c=o.onRunQuery,u=i({},l);u[e]=parseInt(r.target.value,10),a(u),t?(n.dirty=!1,c()):n.dirty=!0}},n.onSelectChange=function(e){return function(t){var r=n.props,o=r.onChange,a=r.query,l=r.onRunQuery,c=i({},a);c[e]=t.value,o(c);var u={};u[e]=t,n.setState(u),l()}},n.onSwitchChange=function(e){return function(){var t=n.props,r=t.onChange,o=t.query,a=t.onRunQuery,l=i({},o);l[e]=!l[e],"json_time_field_enable"!==e||l[e]||(l.json_time_field=""),r(l),a()}};var r=P()(n.props.query,g),o=r.compression,a=r.format,l=r.json_type,c=r.csv_file_header_info;return n.state={compression:{label:o,value:o},format:{label:a,value:a},json_type:{label:l,value:l},csv_file_header_info:{label:c,value:c}},n}return a(t,e),t.prototype.render=function(){var e=P()(this.props.query,g),t=e.path,n=e.query,r=e.csv_allow_quoted_record_delimiter,o=e.csv_comments,a=e.csv_field_delimiter,i=e.csv_quote_character,p=e.csv_quote_escape_character,h=e.csv_record_delimiter,d=e.json_time_field,v=e.json_time_month_first,b=e.json_time_bucket,y=this.state,O=y.compression,w=y.format,S=y.json_type,C=y.csv_file_header_info,N=Object(F.css)(c||(c=l(["\n      margin: 8px 0px 4px 8px;\n      font-weight: 500;\n    "],["\n      margin: 8px 0px 4px 8px;\n      font-weight: 500;\n    "]))),I=this.props.query.json_time_field_enable||!!d;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"gf-form",style:{flexWrap:"wrap"}},m.a.createElement(A,{labelWidth:10,inputWidth:0,className:Object(F.css)(u||(u=l(["\n              flex-grow: 1;\n            "],["\n              flex-grow: 1;\n            "]))),value:t,onChange:this.onInputChange("path"),onKeyDown:this.onKeyDown,onBlur:this.onBlur,label:"Path",tooltip:"Path of object that is queried."}),m.a.createElement(A,{labelWidth:10,label:"Format",tooltip:"Describes the format of the data in the object that is being queried.",inputEl:m.a.createElement(T,{width:10,options:j,value:w,onChange:this.onSelectChange("format")})}),m.a.createElement(A,{labelWidth:10,label:"Compression",tooltip:"Specifies object's compression format.",inputEl:m.a.createElement(T,{width:9,options:_,value:O,onChange:this.onSelectChange("compression")})})),m.a.createElement("div",{className:"gf-form gf-form--grow"},m.a.createElement(A,{labelWidth:10,inputWidth:0,className:Object(F.css)(s||(s=l(["\n              flex-grow: 1;\n            "],["\n              flex-grow: 1;\n            "]))),value:n,onChange:this.onInputChange("query"),onKeyDown:this.onKeyDown,onBlur:this.onBlur,label:"Query",tooltip:"The expression that is used to query the object."})),"CSV"===w.value&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:N},"CSV Details"),m.a.createElement("div",{className:"gf-form",style:{flexWrap:"wrap"}},m.a.createElement(A,{labelWidth:15,inputWidth:5,value:a,onChange:this.onInputChange("csv_field_delimiter",!0),label:"Field Delimiter",tooltip:"A single character used to separate individual fields in a record. You can specify an arbitrary delimiter."}),m.a.createElement(A,{labelWidth:15,label:"File Header Info",tooltip:"Describes the first line of input.",inputEl:m.a.createElement(T,{width:5,options:x,value:C,onChange:this.onSelectChange("csv_file_header_info")})}),m.a.createElement(A,{labelWidth:15,inputWidth:5,value:i,onChange:this.onInputChange("csv_quote_character",!0),label:"Quote Character",tooltip:'A single character used for escaping when the field delimiter is part of the value. For example, if the value is a, b, Amazon S3 wraps this field value in quotation marks, as follows: " a , b ".'}),m.a.createElement(A,{labelWidth:15,inputWidth:5,value:p,onChange:this.onInputChange("csv_quote_escape_character",!0),label:"Quote Escape Character",tooltip:'A single character used for escaping the quotation mark character inside an already escaped value. For example, the value """ a , b """ is parsed as " a , b ".'}),m.a.createElement(A,{labelWidth:15,inputWidth:5,value:o,onChange:this.onInputChange("csv_comments",!0),label:"Comments",tooltip:"A single character used to indicate that a row should be ignored when the character is present at the start of that row. You can specify any character to indicate a comment line."}),m.a.createElement(A,{labelWidth:15,inputWidth:5,value:h,onChange:this.onInputChange("csv_record_delimiter",!0),label:"Record Delimiter",tooltip:"A single character used to separate individual records in the input. Instead of the default value, you can specify an arbitrary delimiter."}),m.a.createElement(A,{labelWidth:15,label:"Allow Quoted Record Delimiter",tooltip:"Specifies that CSV field values may contain quoted record delimiters and such records should be allowed. Default value is FALSE. Setting this value to TRUE may lower performance.",inputEl:m.a.createElement(W,{label:"",checked:r,onChange:this.onSwitchChange("csv_allow_quoted_record_delimiter")})}))),"JSON"===w.value&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:N},"JSON Details"),m.a.createElement("div",{className:"gf-form"},m.a.createElement(A,{labelWidth:10,label:"Type",tooltip:"The type of JSON.",inputEl:m.a.createElement(T,{width:10,options:E,value:S,onChange:this.onSelectChange("json_type")})}),m.a.createElement(A,{labelWidth:10,label:"Has Time Field?",tooltip:"Does the JSON have a field with packet timestamp",inputEl:m.a.createElement(W,{label:"",checked:I,onChange:this.onSwitchChange("json_time_field_enable")})})),I&&m.a.createElement("div",{className:"gf-form"},m.a.createElement(A,{labelWidth:10,inputWidth:0,className:Object(F.css)(f||(f=l(["\n                    flex-grow: 1;\n                  "],["\n                    flex-grow: 1;\n                  "]))),value:d,onChange:this.onInputChange("json_time_field"),onKeyDown:this.onKeyDown,onBlur:this.onBlur,label:"Time Field",tooltip:"The expression that is used to query time field."}),m.a.createElement(A,{labelWidth:10,label:"Month First",tooltip:"Is time field month first?",inputEl:m.a.createElement(W,{label:"",checked:v,onChange:this.onSwitchChange("json_time_month_first")})}),m.a.createElement(A,{labelWidth:10,inputWidth:10,type:"number",value:b,onChange:this.onIntInputChange("json_time_bucket"),onKeyDown:this.onKeyDown,onBlur:this.onBlur,label:"Time Bucket",tooltip:"Time difference between each entry within a packet in nanoseconds"}))))},t}(b.PureComponent);n.d(t,"plugin",(function(){return q}));var q=new r.DataSourcePlugin(p).setConfigEditor(C).setQueryEditor(I)}])}));
//# sourceMappingURL=module.js.map